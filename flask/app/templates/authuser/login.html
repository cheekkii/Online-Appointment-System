{% extends "authuser/index.html" %} 
{% block content%}
<link rel="stylesheet" href="/static/css/login.css">

<div class="container-fluid">
  <div class="row vh-100">
    <!-- Left Side (Branding & Design) -->
    <div class="col-md-6 d-none d-md-flex left-side">
      <div class="shapes">
        <div class="shape block00"></div>
        <div class="shape block01"></div>
        <div class="circle block02"></div>
        
      </div>
      <div class="shapes">
        <div class="circle block10"></div>
        <div class="shape block11"></div>
        <div class="shape block12"></div>
        <div class="shape block13"></div>
        <div class="shape block14"></div>

      </div>
      <div class="shapes">
        <div class="shape block20"></div>
        <div class="circle block21"></div>
        <div class="shape block22"></div>
      </div>
      <div class="shapes">
        <div class="shape block30"></div>
        <div class="shape block31"></div>
        <div class="shape block32"></div>
        <div class="shape block33"></div>
        <div class="shape block34"></div>
        <div class="shape block35"></div>
      </div>
      <div class="content text-center">
        <h1><strong>Dodle</strong> <span class="highlight">Your&nbsp;Smart</span></h1>
        <h4 class="blue-text"><strong>Scheduling Assistant!</strong></h4>
      </div>
    </div>
    <!-- Show name for small screen -->
    <div class="d-block d-md-none text-center mt-3">
      <h1 class="brand-name">
        <strong>
        <span class="dodle-small d-red">D</span>
        <span class="dodle-small d-green">o</span>
        <span class="dodle-small d-yellow">d</span>
        <span class="dodle-small d-blue">l</span>
        <span class="dodle-small d-purple">e</span>
        </strong>
      </h1>
    </div>
    <!-- Right Side (Login Form) -->
    <div class="col-md-6 d-flex justify-content-center align-items-center right-side">
      <div class="border rounded-5 p-4 box-area">
        <div class="header-text mb-4 text-center">
          <h2><strong>Log In</strong></h2>
          <p class="text-muted">Please enter your details</p>
        </div>
        <form action="/login" method="POST">
          {% for message in get_flashed_messages() %}
          <div class="alert alert-info">
            {{ message }}

          </div>
          {% endfor %}
          <div class="input-group mb-3">
            <input
              type="email"
              name="email"
              id="email"
              required
            />
            <label>Email</label>
          </div>
          <div class="input-group mb-3 password-box">
            <input
              type="password"
              name="password"
              id="password"
              required
            />
            <label>Password</label>
            <button id="visibility" class="material-symbols-outlined icon" type="button">
              visibility_off
            </button>
          </div>
          <div class="mb-3 d-flex justify-content-between">
            <div class="form-check">
              <input type="checkbox" class="form-check-input" id="formCheck" name="remember" />
              <label for="formCheck" class="form-check-label text-secondary">
                <small>Remember Me</small>
              </label>
            </div>
          </div>
          <div class="mb-3">
            <button class="btn btn-lg btn-dark w-100 fs-6" type="submit">Log In</button>
          </div>
          <div class="mb-3">
            <a href="{{ url_for('google') }}" class="btn btn-lg btn-light w-100 fs-6 border d-flex align-items-center justify-content-center">
              <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google Logo" style="height: 20px; margin-right: 10px;">
              Sign in with Google
            </a>
          </div>
          <div class="mb-3">
            <a href="{{ url_for('github') }}" class="btn btn-lg btn-light w-100 fs-6 border d-flex align-items-center justify-content-center">
                <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub Logo" style="height: 20px; margin-right: 10px;">
                Sign in with GitHub
            </a>
          </div>
          <div class="header-text mb-4 text-center">
            <small>Don't have an account? <a href="/signin">Sign Up</a></small>
          </div>

            <!-- ADDED FOR CSRF by tanya -->
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
        </form>
      </div>
    </div>
  </div>
</div>


<script>
    $("#visibility").click(function(){
        let currentIcon = $(this).text().trim(); // ดึงค่าปัจจุบัน
        let passwordField = $("#password");
        let currentType = passwordField.attr("type");
        
        if(currentType == "password"){
            $(this).text("visibility"); // เปลี่ยนไอคอนเป็นเปิดตา
            passwordField.attr("type", "text"); // เปลี่ยนเป็นแสดงรหัสผ่าน
        }else{
            $(this).text("visibility_off"); // เปลี่ยนไอคอนเป็นเปิดตา
            passwordField.attr("type", "password"); // เปลี่ยนเป็นซ่อนรหัสผ่าน
        }
        // เอาบรรทัดนี้ออก
        // $("#password").val(passwordField.val())
    });
    
</script>
{% endblock %}